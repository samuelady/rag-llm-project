{
  "text": "TouseIPC,appscallIPCmethodsinproxyobjects. TheproxyobjectstransparentlymarshallthecallparametersintoaparcelandsendatransactiontotheBinderserver, whichisimplementedasacharacterdriver(/dev/binder). Theserverholdsathreadpoolforhandlingincomingrequests anddeliversmessagestothedestinationobject. Fromtheperspectiveoftheclientapp,allofthisseemslikearegular methodcall,alltheheavyliftingisdonebytheBinderframework. • BinderOverview-Imagesource: AndroidBinderbyThorstenSchreiber Servicesthatallowotherapplicationstobindtothemarecalledboundservices. TheseservicesmustprovideanIBinder interface to clients. Developers use the Android Interface Descriptor Language (AIDL) to write interfaces for remote services. ServiceManagerisasystemdaemonthatmanagestheregistrationandlookupofsystemservices. Itmaintainsalistof name/Binderpairsforallregisteredservices. ServicesareaddedwithaddServiceandretrievedbynamewiththestatic getServicemethodinandroid.os.ServiceManager: ExampleinJava: 101\\npublic static IBinder getService(Stringname){ try{ IBinderservice =sCache.get(name); if(service !=null){ return service; }else { return getIServiceManager().getService(name); } }catch (RemoteExceptione){ Log.e(TAG,\"erroringetService\",e); } return null; } ExampleinKotlin: companion object { private valsCache:Map<String,IBinder>=ArrayMap() fungetService(name:String):IBinder?{ try{ valservice =sCache[name] return service ?:getIServiceManager().getService(name) }catch (e:RemoteException){ Log.e(FragmentActivity.TAG,\"erroringetService\",e) } return null } } Youcanquerythelistofsystemserviceswiththeservice listcommand. $adbshellservicelist Found99services: 0carrier_config: [com.android.internal.telephony.ICarrierConfigLoader] 1phone: [com.android.internal.telephony.ITelephony] 2isms: [com.android.internal.telephony.ISms] 3iphonesubinfo: [com.android.internal.telephony.IPhoneSubInfo] Intents IntentmessagingisanasynchronouscommunicationframeworkbuiltontopofBinder. Thisframeworkallowsbothpoint- to-pointandpublish-subscribemessaging. AnIntent isamessagingobjectthatcanbeusedtorequestanactionfrom another app component. Although intents facilitate inter-component communication in several ways, there are three fundamentalusecases: • Startinganactivity – An activity represents a single screen in an app. You can start a new instance of an activity by passing an intenttostartActivity. Theintentdescribestheactivityandcarriesnecessarydata. • Startingaservice – AServiceisacomponentthatperformsoperationsinthebackground,withoutauserinterface. WithAndroid 5.0(APIlevel21)andlater,youcanstartaservicewithJobScheduler. • Deliveringabroadcast – Abroadcastisamessagethatanyappcanreceive. Thesystemdeliversbroadcastsforsystemevents,includ- ingsystembootandcharginginitialization. Youcandeliverabroadcasttootherappsbypassinganintentto sendBroadcastorsendOrderedBroadcast. Therearetwotypesofintents. Explicitintentsnamethecomponentthatwillbestarted(thefullyqualifiedclassname). Forinstance: ExampleinJava: Intentintent =newIntent(this,myActivity.myClass); ExampleinKotlin: 102\\nvarintent =Intent(this,myActivity.myClass) ImplicitintentsaresenttotheOStoperformagivenactiononagivensetofdata(TheURLoftheOWASPwebsiteinour examplebelow). Itisuptothesystemtodecidewhichapporclasswillperformthecorrespondingservice. Forinstance: ExampleinJava: Intentintent =newIntent(Intent.MY_ACTION,Uri.parse(\"https://www.owasp.org\")); ExampleinKotlin: varintent =Intent(Intent.MY_ACTION,Uri.parse(\"https://www.owasp.org\")) An intent filter is an expression in Android Manifest files that specifies the type of intents the component would like to receive. Forinstance,bydeclaringanintentfilterforanactivity,youmakeitpossibleforotherappstodirectlystartyour activitywithacertainkindofintent. Likewise,youractivitycanonlybestartedwithanexplicitintentifyoudon’tdeclare anyintentfiltersforit. Androidusesintentstobroadcastmessagestoapps(suchasanincomingcallorSMS)importantpowersupplyinformation (lowbattery,forexample),andnetworkchanges(lossofconnection,forinstance). Extradatamaybeaddedtointents (throughputExtra/getExtras). Hereisashortlistofintentssentbytheoperatingsystem. AllconstantsaredefinedintheIntentclass,andthewhole listisintheofficialAndroiddocumentation: • ACTION_CAMERA_BUTTON • ACTION_MEDIA_EJECT • ACTION_NEW_OUTGOING_CALL • ACTION_TIMEZONE_CHANGED To improve security and privacy, a Local Broadcast Manager is used to send and receive intents within an app without havingthemsenttotherestoftheoperatingsystem. Thisisveryusefulforensuringthatsensitiveandprivatedatadon’t leavetheappperimeter(geolocationdataforinstance). Broadcast Receivers BroadcastReceiversarecomponentsthatallowappstoreceivenotificationsfromotherappsandfromthesystemitself. With them, apps can react to events (internal, initiated by other apps, or initiated by the operating system). They are generallyusedtoupdateuserinterfaces,startservices,updatecontent,andcreateusernotifications. TherearetwowaystomakeaBroadcastReceiverknowntothesystem. OnewayistodeclareitintheAndroidManifest file. ThemanifestshouldspecifyanassociationbetweentheBroadcastReceiverandanintentfiltertoindicatetheactions thereceiverismeanttolistenfor. AnexampleBroadcastReceiverdeclarationwithanintentfilterinamanifest: <receiver android:name=\".MyReceiver\" > <intent-filter> <action android:name=\"com.owasp.myapplication.MY_ACTION\" /> </intent-filter> </receiver> Pleasenotethatinthisexample,theBroadcastReceiverdoesnotincludetheandroid:exportedattribute. Asatleast onefilterwasdefined,thedefaultvaluewillbesetto“true”. Inabsenceofanyfilters,itwillbesetto“false”. Theotherwayistocreatethereceiverdynamicallyincode. ThereceivercanthenregisterwiththemethodContext. registerReceiver. AnexampleofregisteringaBroadcastReceiverdynamically: ExampleinJava: 103\\n//Defineabroadcastreceiver BroadcastReceivermyReceiver =newBroadcastReceiver(){ @Override public void onReceive(Contextcontext,Intentintent){ Log.d(TAG,\"IntentreceivedbymyReceiver\"); } }; //Defineanintentfilterwithactionsthatthebroadcastreceiverlistensfor IntentFilterintentFilter =newIntentFilter(); intentFilter.addAction(\"com.owasp.myapplication.MY_ACTION\"); //Toregisterthebroadcastreceiver registerReceiver(myReceiver,intentFilter); //Toun-registerthebroadcastreceiver unregisterReceiver(myReceiver); ExampleinKotlin: //Defineabroadcastreceiver valmyReceiver:BroadcastReceiver =object :BroadcastReceiver(){ override funonReceive(context:Context,intent:Intent){ Log.d(FragmentActivity.TAG,\"IntentreceivedbymyReceiver\") } } //Defineanintentfilterwithactionsthatthebroadcastreceiverlistensfor valintentFilter =IntentFilter() intentFilter.addAction(\"com.owasp.myapplication.MY_ACTION\") //Toregisterthebroadcastreceiver registerReceiver(myReceiver,intentFilter) //Toun-registerthebroadcastreceiver unregisterReceiver(myReceiver) Notethatthesystemstartsanappwiththeregisteredreceiverautomaticallywhenarelevantintentisraised. According to Broadcasts Overview, a broadcast is considered “implicit” if it does not target an app specifically. After receivinganimplicitbroadcast,Androidwilllistallappsthathaveregisteredagivenactionintheirfilters. Ifmorethan oneapphasregisteredforthesameaction,Androidwillprompttheusertoselectfromthelistofavailableapps. An interesting feature of Broadcast Receivers is that they can be prioritized; this way, an intent will be delivered to all authorized receivers according to their priority. A priority can be assigned to an intent filter in the manifest via the android:priority attribute as well as programmatically via the IntentFilter.setPriority method. However, note thatreceiverswiththesameprioritywillberuninanarbitraryorder. Ifyourappisnotsupposedtosendbroadcastsacrossapps,useaLocalBroadcastManager(LocalBroadcastManager). Theycanbeusedtomakesureintentsarereceivedfromtheinternalapponly, andanyintentfromanyotherappwill bediscarded. Thisisveryusefulforimprovingsecurityandtheefficiencyoftheapp,asnointerprocesscommunication isinvolved. However,pleasenotethattheLocalBroadcastManagerclassisdeprecatedandGooglerecommendsusing alternativessuchasLiveData. FormoresecurityconsiderationsregardingBroadcastReceiver,seeSecurityConsiderationsandBestPractices. Implicit Broadcast Receiver Limitation AccordingtoBackgroundOptimizations,appstargetingAndroid7.0(APIlevel24)orhighernolongerreceiveCONNECTIV- ITY_ACTION broadcast unless they register their Broadcast Receivers with Context.registerReceiver(). The system doesnotsendACTION_NEW_PICTUREandACTION_NEW_VIDEObroadcastsaswell. According to Background Execution Limits, apps that target Android 8.0 (API level 26) or higher can no longer register BroadcastReceiversforimplicitbroadcastsintheirmanifest,exceptforthoselistedinImplicitBroadcastExceptions. The BroadcastReceiverscreatedatruntimebycallingContext.registerReceiverarenotaffectedbythislimitation. AccordingtoChangestoSystemBroadcasts,beginningwithAndroid9(APIlevel28),theNETWORK_STATE_CHANGED_ACTION broadcastdoesn’treceiveinformationabouttheuser’slocationorpersonallyidentifiabledata. Android Application Publishing Onceanapphasbeensuccessfullydeveloped,thenextstepistopublishandshareitwithothers. However,appscan’t simplybeaddedtoastoreandshared,theymustbefirstsigned. Thecryptographicsignatureservesasaverifiablemark placedbythedeveloperoftheapp. Itidentifiestheapp’sauthorandensuresthattheapphasnotbeenmodifiedsince itsinitialdistribution. 104\\nSigning Process Duringdevelopment,appsaresignedwithanautomaticallygeneratedcertificate. Thiscertificateisinherentlyinsecure andisfordebuggingonly. Moststoresdon’tacceptthiskindofcertificateforpublishing;therefore,acertificatewithmore securefeaturesmustbecreated. WhenanapplicationisinstalledontheAndroiddevice,thePackageManagerensures thatithasbeensignedwiththecertificateincludedinthecorrespondingAPK.Ifthecertificate’spublickeymatchesthe key used to sign any other APK on the device, the new APK may share a UID with the pre-existing APK. This facilitates interactionsbetweenapplicationsfromasinglevendor. Alternatively, specifyingsecuritypermissionsfortheSignature protectionlevelispossible;thiswillrestrictaccesstoapplicationsthathavebeensignedwiththesamekey. APK Signing Schemes Androidsupportsthreeapplicationsigningschemes. StartingwithAndroid9(APIlevel28),APKscanbeverifiedwithAPK SignatureSchemev3(v3scheme),APKSignatureSchemev2(v2scheme)orJARsigning(v1scheme). ForAndroid7.0 (APIlevel24)andabove,APKscanbeverifiedwiththeAPKSignatureSchemev2(v2scheme)orJARsigning(v1scheme).",
  "metadata": {
    "doc_id": "OWASP_MASTG",
    "chunk_id": 59
  },
  "embedding": [
    -0.10943876951932907,
    -0.09119166433811188,
    -0.013576695695519447,
    -0.06687618792057037,
    -0.008490369655191898,
    0.022877976298332214,
    0.0023168905172497034,
    0.016761530190706253,
    0.018557898700237274,
    0.07778653502464294,
    0.05519368126988411,
    -0.0028178272768855095,
    0.07482481747865677,
    0.002717601601034403,
    -0.0053769065998494625,
    -0.041126612573862076,
    0.08884785324335098,
    -0.061904553323984146,
    -0.06290076673030853,
    0.05731037259101868,
    0.027078552171587944,
    0.062491897493600845,
    -0.0448177233338356,
    -0.024130066856741905,
    0.025007648393511772,
    -0.028055090457201004,
    -0.06343358755111694,
    -0.09578435868024826,
    -0.01921369507908821,
    -0.01751578226685524,
    -0.01140960119664669,
    0.026408975943922997,
    0.008464587852358818,
    0.032324884086847305,
    -0.02404625527560711,
    0.023604590445756912,
    0.08480166643857956,
    -0.025045188143849373,
    -0.02761356718838215,
    -0.04570755362510681,
    -0.031846292316913605,
    -0.09154203534126282,
    0.0005330067942850292,
    0.011622992344200611,
    -0.04799611121416092,
    -0.011211187578737736,
    -0.00810100045055151,
    -0.02854221872985363,
    0.0291985385119915,
    0.029351932927966118,
    0.02077176608145237,
    0.022903066128492355,
    0.00884158629924059,
    0.04365234822034836,
    -0.05720023810863495,
    0.01126150880008936,
    -0.026183003559708595,
    0.06290602684020996,
    0.004476561211049557,
    0.10737218707799911,
    0.0125270439311862,
    0.0019610843155533075,
    -0.03141103684902191,
    0.052084390074014664,
    -0.004874349571764469,
    0.0179841760545969,
    0.03459177538752556,
    -0.11993373930454254,
    0.03280031681060791,
    -0.104953333735466,
    -0.129797101020813,
    0.024587417021393776,
    0.013180219568312168,
    0.038540586829185486,
    -0.03619897738099098,
    0.004625236615538597,
    0.04422786831855774,
    0.0009185732924379408,
    0.013885566964745522,
    -0.17305877804756165,
    -0.00037834286922588944,
    0.035506460815668106,
    -0.028064940124750137,
    0.15967321395874023,
    0.017501208931207657,
    0.052441105246543884,
    -0.0487031564116478,
    -0.018714888021349907,
    0.045988552272319794,
    0.0576714463531971,
    0.013790586963295937,
    -0.025411149486899376,
    -0.053813472390174866,
    -0.011047359555959702,
    -0.06352530419826508,
    -0.023702401667833328,
    -0.06798665970563889,
    -0.039016466587781906,
    -0.1314351111650467,
    0.04120103269815445,
    0.03269955888390541,
    -0.04088253527879715,
    -0.03876383975148201,
    -0.0450877770781517,
    -0.0013016676530241966,
    -0.08603089302778244,
    -0.02692296914756298,
    -0.07687653601169586,
    -0.017659522593021393,
    0.05905638262629509,
    -0.014240565709769726,
    -0.027990661561489105,
    -0.0330791138112545,
    -0.0437907874584198,
    -0.005076277535408735,
    0.010607950389385223,
    0.01028246246278286,
    9.503393084742129e-05,
    0.08979319781064987,
    -0.0034053639974445105,
    -0.03706091269850731,
    -0.05182162672281265,
    -0.02284863032400608,
    -0.07177931070327759,
    0.024369539692997932,
    -0.02732500620186329,
    0.00763933639973402,
    2.006529624729686e-32,
    0.011512016877532005,
    0.006236312910914421,
    0.031896043568849564,
    0.053811509162187576,
    -0.041423771530389786,
    0.03339226171374321,
    0.0504908449947834,
    0.05855188146233559,
    -0.003776427125558257,
    -0.06522566825151443,
    0.005044613964855671,
    0.05286002904176712,
    -0.0076582771725952625,
    0.012504873797297478,
    0.0076750945299863815,
    -0.034925371408462524,
    -0.02053961716592312,
    0.06926828622817993,
    0.003950665704905987,
    0.017895668745040894,
    -0.07750333100557327,
    -0.04188999906182289,
    0.031131500378251076,
    -0.005228487774729729,
    0.01687414012849331,
    0.05763234943151474,
    0.052771665155887604,
    0.022938743233680725,
    0.10155254602432251,
    0.04896395280957222,
    -0.009289558976888657,
    -0.011955445632338524,
    -0.07813533395528793,
    0.01641394942998886,
    -0.026296785101294518,
    -0.06245487555861473,
    -0.002717219293117523,
    -0.05519953742623329,
    -0.03991270810365677,
    -0.04090907797217369,
    -0.09491489082574844,
    -0.06815099716186523,
    -0.1625751256942749,
    0.0016781892627477646,
    -0.027002574875950813,
    -0.09071291238069534,
    0.03637044131755829,
    -0.04455391317605972,
    0.018763044849038124,
    -0.021451013162732124,
    0.018955446779727936,
    0.0038971183821558952,
    0.029017459601163864,
    -0.06789793819189072,
    -0.03158755972981453,
    -0.0215708389878273,
    -0.02894040383398533,
    0.032974228262901306,
    -0.017628464847803116,
    0.05083119496703148,
    -0.03489989414811134,
    -0.0030150292441248894,
    -0.00319687370210886,
    -0.007666738238185644,
    0.04474567249417305,
    -0.00593916280195117,
    -0.0017003746470436454,
    -0.09445106983184814,
    -0.043433114886283875,
    -0.010799065232276917,
    -0.0036695655435323715,
    -0.02175149880349636,
    0.06687792390584946,
    0.10397174209356308,
    0.0030552104581147432,
    0.009206600487232208,
    -0.015830250456929207,
    0.03387947753071785,
    -0.029079975560307503,
    -0.04637959226965904,
    -0.017700249329209328,
    0.010653767734766006,
    0.035552844405174255,
    0.02288937196135521,
    -0.05906471237540245,
    -0.05358046293258667,
    0.058867741376161575,
    -0.07175827026367188,
    -0.0021950097288936377,
    -0.05742192640900612,
    -0.05935098975896835,
    -0.005146871320903301,
    -0.02176489308476448,
    -0.003542341524735093,
    -0.024638161063194275,
    -2.0561711919752928e-32,
    0.036849264055490494,
    -0.0791226178407669,
    -0.10849826037883759,
    -0.012519823387265205,
    -0.011038508266210556,
    -0.04113864153623581,
    -0.04623521491885185,
    0.06539426743984222,
    0.01080218143761158,
    0.001081956783309579,
    0.039739273488521576,
    0.01780056022107601,
    -0.01116387452930212,
    -0.040513549000024796,
    0.016775036230683327,
    0.009061592631042004,
    -0.00828694086521864,
    -0.05765017122030258,
    -0.06177058815956116,
    0.006711732596158981,
    0.002307602670043707,
    0.03990532457828522,
    0.09507907181978226,
    0.025965290144085884,
    -0.03457438200712204,
    -0.023362915962934494,
    0.0040881335735321045,
    0.060359738767147064,
    -0.03211892396211624,
    -0.027785852551460266,
    0.057631708681583405,
    -0.02945302613079548,
    -0.04358101636171341,
    -0.06627638638019562,
    -0.06327598541975021,
    0.008891859091818333,
    -0.03398964926600456,
    0.017484115436673164,
    -0.05876920744776726,
    0.0006145915249362588,
    0.10176265984773636,
    -0.08457258343696594,
    0.021040262654423714,
    0.012850371189415455,
    0.05274493247270584,
    -0.11945422738790512,
    -0.02507912740111351,
    -0.06638164818286896,
    0.035042040050029755,
    0.0396759957075119,
    0.0513363741338253,
    -0.05888712778687477,
    -0.01230539195239544,
    0.04124315083026886,
    0.051060643047094345,
    0.13647112250328064,
    0.04938241466879845,
    -0.07134727388620377,
    0.012357160449028015,
    -0.04547800496220589,
    0.09442949295043945,
    -0.017000598832964897,
    -0.0396202988922596,
    0.059136342257261276,
    0.04734545201063156,
    0.006069638766348362,
    0.08308673650026321,
    -0.03014538437128067,
    -0.03337083384394646,
    0.0606512650847435,
    0.005423717200756073,
    -0.09387638419866562,
    -0.007821796461939812,
    0.011423088610172272,
    0.0781622901558876,
    0.03170635178685188,
    0.07210274785757065,
    -0.08717764914035797,
    -0.04627841338515282,
    -0.04395339637994766,
    -0.025826366618275642,
    0.01880648545920849,
    -0.002394719747826457,
    0.04634253308176994,
    0.0749545693397522,
    -0.002043743385002017,
    -0.03836245834827423,
    0.05606336519122124,
    0.017217284068465233,
    -0.01409134455025196,
    -0.086906798183918,
    0.04590064659714699,
    -0.0416891872882843,
    0.07960669696331024,
    0.02434658631682396,
    -7.245376565379047e-08,
    0.001947607845067978,
    0.0046467543579638,
    -0.04257931187748909,
    -0.05007055029273033,
    -0.04190237075090408,
    -0.0010585146956145763,
    0.03716301918029785,
    0.004744719248265028,
    0.032930318266153336,
    -0.04336189851164818,
    0.012153821997344494,
    -0.04672112315893173,
    -0.07659824937582016,
    0.01620316505432129,
    0.10191075503826141,
    -0.02992812916636467,
    0.10510122776031494,
    0.05872128903865814,
    -0.04875938221812248,
    0.00700035598129034,
    0.03033776767551899,
    -0.08520825952291489,
    0.005767985247075558,
    -0.056595027446746826,
    0.022161569446325302,
    0.0378454215824604,
    0.013275491073727608,
    0.021846750751137733,
    0.03551971912384033,
    0.0425277054309845,
    0.01765565015375614,
    -0.007656467147171497,
    0.06482962518930435,
    -0.08872509002685547,
    -0.014972992241382599,
    0.17178158462047577,
    -0.0497739315032959,
    -0.05543873459100723,
    0.06881853938102722,
    0.11807692795991898,
    0.009574681520462036,
    0.08260336518287659,
    0.015279468148946762,
    0.032149720937013626,
    0.092583067715168,
    0.03356900066137314,
    -0.015064784325659275,
    0.025464048609137535,
    -0.013500460423529148,
    -0.0029256048146635294,
    -0.1674564629793167,
    -0.01934361271560192,
    -0.03627464175224304,
    0.02641642838716507,
    -0.004006643779575825,
    0.01141379028558731,
    0.013433423824608326,
    -0.055115144699811935,
    0.06473766267299652,
    0.11800859868526459,
    0.04790790006518364,
    0.062718965113163,
    -0.03705351799726486,
    0.017805365845561028
  ]
}